var ProductRecommend=function(){var e=function(e){return $(e).attr("name").split("[").pop().slice(0,-1)},o=function(){var o={Recommend:{}};return $("#form-recommend").find("input,textarea").each(function(a,t){if("_method"!=t.name){var n=e(t);o.Recommend[n]=t.value}}),o.Recommend.recaptcha_response=$("#g-recaptcha-response").val(),JSON.stringify(o)},a=function(e=""){$("#g-recaptcha-response-error").remove();var o=$("#g-recaptcha-response").val();o.length>0&&grecaptcha.reset()},t=function(){var e=o();$(this);if($("#form-recommend").valid()){var t=$("#g-recaptcha-response").val();if(t.length>0)$("#submit-recommendation").find(".btn-text").addClass("loading-button"),$.post(base_url+"produto/recommend/"+$(".product-name").data("id"),{data:e},function(e){e=JSON.parse(e),e.Evento.status?($.message.show("success",{vars:{title:"Produto recomendado com sucesso!",idleTime:3500}}),a(),r()):$.message.show("error",{vars:{title:e.Evento.message},idleTime:3500}),$("#submit-recommendation").find(".btn-text").removeClass("loading-button")});else{var n='<label id="g-recaptcha-response-error" class="error" for="g-recaptcha-response">Você precisa completar o Captcha de segurança.</label>';$(".modal-captcha").append(n)}}},n=function(){const e=$("#modal-tell-me"),o=$("#form-recommend");e.removeClass().addClass("modal modal-share"),e.find(".modal-header-title").html("Recomendar este produto"),e.find(".modal-footer").each(function(){$(this).find(".btn").hide(),$(this).find("#submit-recommendation").show()}),$("#modal-product-tellme").hide(),$("#modal-rating").hide(),$("#modal-recommend").show(),$.modal.show("fadeInDown","modal-tell-me"),o.find(":input").on("blur change keyup",function(){__enableDisableButtonModalSubmit("#form-recommend","#submit-recommendation")})},r=function(){$.modal.hide("fadeInUp","modal-tell-me")};return{open:n,submit:t}}();